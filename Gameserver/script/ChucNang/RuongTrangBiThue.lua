local tbItem = Item:GetClass("RuongTrangBiThue");

tbItem.TaskGroup_DongNap = 4004;	--Tích Lũy Đồng Nạp
tbItem.TaskID_DongNap = 1;			--Tích Lũy Đồng Nạp
tbItem.MocYeuCau = 2000;
tbItem.Item_Ruong = {18,1,3087,1};	--RuongTrangBiThue
tbItem.Nam_Kim = 
{
{2,3,2124,9,5,12};--Đường Nghê Giáp
{2,8,2064,9,4,12};--Long Bàn Thúc Yêu
{2,7,2064,9,3,12};--Tung Hoành Ngoa
{2,10,2064,9,2,12};--Hỏa Lân Hộ Uyển
{2,9,2124,9,1,12};--Vũ Linh Khôi
{2,6,2034,9,3,12};--Thanh Hư Phù
{2,5,2034,9,5,12};--Quần Điểu Liên
{2,11,2064,9,2,12};--Côn Bằng Bội
{2,4,2034,9,4,12};--Hình Thiên Giới	
}
tbItem.Nu_Kim = 
{
{2,3,2130,9,5,12};--Huyền Thiết Tuyết Ngân Giáp
{2,8,2070,9,4,12};--Lương Cúc Ngọc Đái
{2,7,2070,9,3,12};--Sính Sa Ngoa
{2,10,2070,9,2,12};--Thiên Công Hoàn
{2,9,2130,9,1,12};--Kim Phượng Triển Sí Khôi
{2,6,2034,9,3,12};--Thanh Hư Phù
{2,5,2034,9,5,12};--Quần Điểu Liên
{2,11,2070,9,2,12};--Già Nam Hương Nang
{2,4,2034,9,4,12};--Hình Thiên Giới
}
tbItem.Nam_Moc = 
{
{2,3,2148,9,3,12};--Vô Dung Kình Trang
{2,8,2076,9,1,12};--Long Bàn Thúc Yêu
{2,7,2076,9,4,12};--Tung Hoành Ngoa
{2,10,2076,9,5,12};--Hỏa Lân Hộ Uyển
{2,9,2148,9,2,12};--Bách Độc Phát Kết
{2,6,2040,9,4,12};--Thanh Hư Phù
{2,5,2040,9,3,12};--Quần Điểu Liên
{2,11,2076,9,5,12};--Côn Bằng Bội
{2,4,2040,9,1,12};--Hình Thiên Giới
}
tbItem.Nu_Moc = 
{
{2,3,2154,9,3,12};--Mê Hồn Thường
{2,8,2082,9,1,12};--Lương Cúc Ngọc Đái
{2,7,2082,9,4,12};--Sính Sa Ngoa
{2,10,2082,9,5,12};--Thiên Công Hoàn
{2,9,2154,9,2,12};--Long Huyết Diện Tráo
{2,6,2040,9,4,12};--Thanh Hư Phù
{2,5,2040,9,3,12};--Quần Điểu Liên
{2,11,2082,9,5,12};--Già Nam Hương Nang
{2,4,2040,9,1,12};--Hình Thiên Giới
}
tbItem.Nam_Thuy = 
{
{2,3,2172,9,1,12};--Đường Nghê Giáp
{2,8,2088,9,5,12};--Long Bàn Thúc Yêu
{2,7,2088,9,2,12};--Tung Hoành Ngoa
{2,10,2088,9,4,12};--Hỏa Lân Hộ Uyển
{2,9,2172,9,3,12};--Vũ Linh Khôi
{2,6,2046,9,2,12};--Thanh Hư Phù
{2,5,2046,9,1,12};--Quần Điểu Liên
{2,11,2088,9,4,12};--Côn Bằng Bội
{2,4,2046,9,5,12};--Hình Thiên Giới
}
tbItem.Nu_Thuy = 
{
{2,3,2178,9,1,12};--Huyền Thiết Tuyết Ngân Giáp
{2,8,2094,9,5,12};--Lương Cúc Ngọc Đái
{2,7,2094,9,2,12};--Sính Sa Ngoa
{2,10,2094,9,4,12};--Thiên Công Hoàn
{2,9,2178,9,3,12};--Kim Phượng Triển Sí Khôi
{2,6,2046,9,2,12};--Thanh Hư Phù
{2,5,2046,9,1,12};--Quần Điểu Liên
{2,11,2094,9,4,12};--Già Nam Hương Nang
{2,4,2046,9,5,12};--Hình Thiên Giới
}
tbItem.Nam_Hoa = 
{
{2,3,2196,9,2,12};--Đường Nghê Giáp
{2,8,2100,9,3,12};--Long Bàn Thúc Yêu
{2,7,2100,9,5,12};--Tung Hoành Ngoa
{2,10,2100,9,1,12};--Hỏa Lân Hộ Uyển
{2,9,2196,9,4,12};--Vũ Linh Khôi
{2,6,2052,9,5,12};--Thanh Hư Phù
{2,5,2052,9,2,12};--Quần Điểu Liên
{2,11,2100,9,1,12};--Côn Bằng Bội
{2,4,2052,9,3,12};--Hình Thiên Giới
}
tbItem.Nu_Hoa = 
{
{2,3,2202,9,2,12};--Huyền Thiết Tuyết Ngân Giáp
{2,8,2106,9,3,12};--Lương Cúc Ngọc Đái
{2,7,2106,9,5,12};--Sính Sa Ngoa
{2,10,2106,9,1,12};--Thiên Công Hoàn
{2,9,2202,9,4,12};--Kim Phượng Triển Sí Khôi
{2,6,2052,9,5,12};--Thanh Hư Phù
{2,5,2052,9,2,12};--Quần Điểu Liên
{2,11,2106,9,1,12};--Già Nam Hương Nang
{2,4,2052,9,3,12};--Hình Thiên Giới
}
tbItem.Nam_Tho = 
{
{2,3,2220,9,4,12};--Đường Nghê Giáp
{2,8,2112,9,2,12};--Long Bàn Thúc Yêu
{2,7,2112,9,1,12};--Tung Hoành Ngoa
{2,10,2112,9,3,12};--Hỏa Lân Hộ Uyển
{2,9,2220,9,5,12};--Vũ Linh Khôi
{2,6,2058,9,1,12};--Thanh Hư Phù
{2,5,2058,9,4,12};--Quần Điểu Liên
{2,11,2112,9,3,12};--Côn Bằng Bội
{2,4,2058,9,2,12};--Hình Thiên Giới
}
tbItem.Nu_Tho = 
{
{2,3,2226,9,4,12};--Huyền Thiết Tuyết Ngân Giáp
{2,8,2118,9,2,12};--Lương Cúc Ngọc Đái
{2,7,2118,9,1,12};--Sính Sa Ngoa
{2,10,2118,9,3,12};--Thiên Công Hoàn
{2,9,2226,9,5,12};--Kim Phượng Triển Sí Khôi
{2,6,2058,9,1,12};--Thanh Hư Phù
{2,5,2058,9,4,12};--Quần Điểu Liên
{2,11,2118,9,3,12};--Già Nam Hương Nang
{2,4,2058,9,2,12};--Hình Thiên Giới
}


function tbItem:OnUse()
DoScript("\\script\\ChucNang\\\\RuongTrangBiThue.lua");
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
local szMsg = "<color=yellow>Để Sử dụng Lệnh Bài phải đạt yêu cầu Tích Lũy Nạp Thẻ <color=cyan>"..self.MocYeuCau.." Vạn Đồng<color> trở lên.\nNgươi đã Tích Lũy được: <color=cyan>"..TichLuy.." Vạn Đồng<color><color>\n<color=green>Trang bị sẽ nhận được là 1 Set 8x đã cường hóa +12, Hạn sử dụng: 3 ngày<color>\n<color=blue>Hãy chọn loại Trang bị ngươi cần:<color>";
local tbOpt = {
{"<color=yellow>Trang bị Nam ~ hệ Kim", self.SNam_Kim, self},
{"<color=yellow>Trang bị Nữ ~ hệ Kim", self.SNu_Kim, self},
{"<color=green>Trang bị Nam ~ hệ Mộc", self.SNam_Moc, self},
{"<color=green>Trang bị Nữ ~ hệ Mộc", self.SNu_Moc, self},
{"<color=cyan>Trang bị Nam ~ hệ Thủy", self.SNam_Thuy, self},
{"<color=cyan>Trang bị Nữ ~ hệ Thủy", self.SNu_Thuy, self},
{"<color=red>Trang bị Nam ~ hệ Hỏa", self.SNam_Hoa, self},
{"<color=red>Trang bị Nữ ~ hệ Hỏa", self.SNu_Hoa, self},
{"<color=gray>Trang bị Nam ~ hệ Thổ", self.SNam_Tho, self},
{"<color=gray>Trang bị Nữ ~ hệ Thổ", self.SNu_Tho, self},
};
Dialog:Say(szMsg, tbOpt);
end


function tbItem:SNam_Kim()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nam_Kim;
for i = 1,9 do
local pItem = me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNu_Kim()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nu_Kim;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNam_Moc()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nam_Moc;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNu_Moc()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nu_Moc;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNam_Thuy()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nam_Thuy;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNu_Thuy()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nu_Thuy;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNam_Hoa()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nam_Hoa;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNu_Hoa()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nu_Hoa;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNam_Tho()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nam_Tho;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

function tbItem:SNu_Tho()
local TichLuy = me.GetTask(self.TaskGroup_DongNap, self.TaskID_DongNap);
if TichLuy < self.MocYeuCau then
me.CallClientScript({"UiManager:OpenWindow","UI_INFOBOARD","<color=yellow>Sử dụng Lệnh Bài cần đạt mốc Tích Lũy Nạp Thẻ: <color=red>"..self.MocYeuCau.."<color> Vạn Đồng trở lên!<color>"});
return 0;
end	

local tbItems = self.Nu_Tho;
for i = 1,9 do
local pItem =me.AddItem(unpack(tbItems[i]));
pItem.Bind(1);
me.SetItemTimeout(pItem, 3*24*60, 0); -- 3 ngày
local szMsg = "<color=yellow><color=pink>"..me.szName.."<color> nhận thành công Trang bị Thuê:\n<color=cyan>"..pItem.szName.." +12<color><color>";
KDialog.NewsMsg(0, Env.NEWSMSG_COUNT, szMsg);
KDialog.MsgToGlobal(szMsg);
end

me.ConsumeItemInBags(1, 18, 1, 3087, 1);
end

